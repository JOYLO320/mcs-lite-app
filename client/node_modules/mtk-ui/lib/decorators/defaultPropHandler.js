'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _defineProperty2 = require('babel-runtime/helpers/defineProperty');

var _defineProperty3 = _interopRequireDefault(_defineProperty2);

var _identity2 = require('lodash/identity');

var _identity3 = _interopRequireDefault(_identity2);

var _compose2 = require('recompose/compose');

var _compose3 = _interopRequireDefault(_compose2);

var _withState2 = require('recompose/withState');

var _withState3 = _interopRequireDefault(_withState2);

var _branch2 = require('recompose/branch');

var _branch3 = _interopRequireDefault(_branch2);

var _withAttachedProps = require('./withAttachedProps');

var _withAttachedProps2 = _interopRequireDefault(_withAttachedProps);

var _createHelper = require('recompose/createHelper');

var _createHelper2 = _interopRequireDefault(_createHelper);

var _createChainedFunction = require('react-overlays/lib/utils/createChainedFunction');

var _createChainedFunction2 = _interopRequireDefault(_createChainedFunction);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * defaultPropHandler
 *
 * @param {string} propName
 * @param {string} handlerName
 * @param {function} setterAdapter (setter: Function) => Function
 * @param {any} defaultValue
 * @param {ReactElement} BaseComponent
 * @return {ReactElement}
 *
 */

var defaultPropHandler = function defaultPropHandler(propName, handlerName, setterAdapter, defaultValue) {
  return function (BaseComponent) {
    return (0, _branch3.default)(
    /* eslint-disable */
    function (props) {
      return props[propName] == undefined;
    },
    /* eslint-enable */
    (0, _compose3.default)((0, _withState3.default)(propName, 'set' + propName, defaultValue), (0, _withAttachedProps2.default)(function (getProps) {
      return (0, _defineProperty3.default)({}, handlerName, (0, _createChainedFunction2.default)(getProps()[handlerName], setterAdapter(getProps()['set' + propName])));
    })), _identity3.default)(BaseComponent);
  };
};

exports.default = (0, _createHelper2.default)(defaultPropHandler, 'defaultPropHandler');
module.exports = exports['default'];