/**
 * Setup UserReport service
 * @param {string} API_KEY - User voice website id.
 *
 * @output {object} UserReport (global)
 *
 * @author Michael Hsu
 */

'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

var UserReport = (function () {
  function UserReport(_ref) {
    var API_KEY = _ref.API_KEY;

    _classCallCheck(this, UserReport);

    this.API_KEY = API_KEY;
  }

  _createClass(UserReport, [{
    key: 'renderScript',
    value: function renderScript() {
      var ur = document.createElement('script');
      ur.type = 'text/javascript';
      ur.async = true;
      ur.src = '//cdn.userreport.com/userreport.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ur, s);
    }
  }, {
    key: 'setup',
    value: function setup() {
      this.renderScript();

      // Must use user report SDK as global
      global._urq = window._urq || [];
      global._urq.push(['initSite', this.API_KEY]);

      return this;
    }
  }, {
    key: 'show',
    value: function show() {
      global._urq.push(['Feedback_Open', 'submit/bug']);
    }
  }]);

  return UserReport;
})();

exports['default'] = UserReport;
module.exports = exports['default'];